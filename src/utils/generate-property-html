function generatePropertyHtml(property) {
  // ðŸ“Œ Ã‰tape 1 â€” Log complet de l'objet brut reÃ§u
  console.log('[DEBUG] Raw property object:', JSON.stringify(property, null, 2));

  // ðŸ“Œ Ã‰tape 2 â€” AccÃ¨s direct Ã  la valeur de bathrooms
  console.log('[DEBUG] Value of property.bathrooms:', property.bathrooms);
  console.log('[DEBUG] Keys in property:', Object.keys(property));

  // ðŸ“Œ Ã‰tape 3 â€” GÃ©nÃ©ration HTML
  const code = `
    <div>
      <h2>Property Details</h2>
      <ul>
        ${property.code ? `<li><strong>Code:</strong> ${property.code}</li>` : ''}
        ${property.price ? `<li><strong>Price:</strong> ${property.price} â‚¬</li>` : ''}
        ${property.area ? `<li><strong>Area:</strong> ${property.area} mÂ²</li>` : ''}
        ${property.bedrooms ? `<li><strong>Bedrooms:</strong> ${property.bedrooms}</li>` : ''}
        ${property.bathrooms ? `<li><strong>Bathrooms:</strong> ${property.bathrooms}</li>` : ''}
        ${property.city ? `<li><strong>City:</strong> ${property.city}</li>` : ''}
        ${property.category?.value ? `<li><strong>Category:</strong> ${property.category.value}</li>` : ''}
        ${property.parentCategory?.value ? `<li><strong>Parent category:</strong> ${property.parentCategory.value}</li>` : ''}
        ${property.url ? `<li><a href="${property.url}" target="_blank">View full listing</a></li>` : ''}
      </ul>
    </div>
  `.trim();

  // ðŸ“Œ Ã‰tape 4 â€” Log du HTML gÃ©nÃ©rÃ©
  console.log('[DEBUG] Generated HTML before escaping:\n', code);

  // ðŸ“Œ Ã‰tape 5 â€” Transformation pour Ã©viter l'interprÃ©tation par Claude
  const escaped = `<pre>${code.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`;
  console.log('[DEBUG] Escaped HTML for Claude:\n', escaped);

  return escaped;
}

module.exports = { generatePropertyHtml };
